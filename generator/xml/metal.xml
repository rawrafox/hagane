<framework module="metal">
  <use>core_foundation::*</use>
  <use>foundation::*</use>
  <use>legacy_metal::*</use>

  <enumeration name="MTLBlendFactor" type="NSUInteger">
    <value name="MTLBlendFactorZero" value="0" />
    <value name="MTLBlendFactorOne" value="1" />
    <value name="MTLBlendFactorSourceColor" value="2" />
    <value name="MTLBlendFactorOneMinusSourceColor" value="3" />
    <value name="MTLBlendFactorSourceAlpha" value="4" />
    <value name="MTLBlendFactorOneMinusSourceAlpha" value="5" />
    <value name="MTLBlendFactorDestinationColor" value="6" />
    <value name="MTLBlendFactorOneMinusDestinationColor" value="7" />
    <value name="MTLBlendFactorDestinationAlpha" value="8" />
    <value name="MTLBlendFactorOneMinusDestinationAlpha" value="9" />
    <value name="MTLBlendFactorSourceAlphaSaturated" value="10" />
    <value name="MTLBlendFactorBlendColor" value="11" />
    <value name="MTLBlendFactorOneMinusBlendColor" value="12" />
    <value name="MTLBlendFactorBlendAlpha" value="13" />
    <value name="MTLBlendFactorOneMinusBlendAlpha" value="14" />
    <value name="MTLBlendFactorSource1Color" value="15" />
    <value name="MTLBlendFactorOneMinusSource1Color" value="16" />
    <value name="MTLBlendFactorSource1Alpha" value="17" />
    <value name="MTLBlendFactorOneMinusSource1Alpha" value="18" />
  </enumeration>

  <enumeration name="MTLBlendOperation" type="NSUInteger">
    <value name="MTLBlendOperationAdd" value="0" />
    <value name="MTLBlendOperationSubtract" value="1" />
    <value name="MTLBlendOperationReverseSubtract" value="2" />
    <value name="MTLBlendOperationMin" value="3" />
    <value name="MTLBlendOperationMax" value="4" />
  </enumeration>

  <enumeration name="MTLColorWriteMask" type="NSUInteger">
    <value name="MTLColorWriteMaskNone" value="0" />
    <value name="MTLColorWriteMaskRed" value="0x1 << 3" />
    <value name="MTLColorWriteMaskGreen" value="0x1 << 2" />
    <value name="MTLColorWriteMaskBlue" value="0x1 << 1" />
    <value name="MTLColorWriteMaskAlpha" value="0x1 << 0" />
    <value name="MTLColorWriteMaskAll" value="0xf" />
  </enumeration>

  <enumeration name="MTLCompareFunction" type="NSUInteger">
    <value name="MTLCompareFunctionNever" value="0" />
    <value name="MTLCompareFunctionLess" value="1" />
    <value name="MTLCompareFunctionEqual" value="2" />
    <value name="MTLCompareFunctionLessEqual" value="3" />
    <value name="MTLCompareFunctionGreater" value="4" />
    <value name="MTLCompareFunctionNotEqual" value="5" />
    <value name="MTLCompareFunctionGreaterEqual" value="6" />
    <value name="MTLCompareFunctionAlways" value="7" />
  </enumeration>

  <enumeration name="MTLCPUCacheMode" type="NSUInteger">
    <value name="MTLCPUCacheModeDefaultCache" value="0" />
    <value name="MTLCPUCacheModeWriteCombined" value="1" />
  </enumeration>

  <enumeration name="MTLCullMode" type="NSUInteger">
    <value name="MTLCullModeNone" value="0" />
    <value name="MTLCullModeFront" value="1" />
    <value name="MTLCullModeBack" value="2" />
  </enumeration>

  <enumeration name="MTLDepthClipMode" type="NSUInteger">
    <value name="MTLDepthClipModeClip" value="0" />
    <value name="MTLDepthClipModeClamp" value="1" />
  </enumeration>

  <enumeration name="MTLIndexType" type="NSUInteger">
    <value name="MTLIndexTypeUInt16" value="0" />
    <value name="MTLIndexTypeUInt32" value="1" />
  </enumeration>

  <enumeration name="MTLPrimitiveType" type="NSUInteger">
    <value name="MTLPrimitiveTypePoint" value="0" />
    <value name="MTLPrimitiveTypeLine" value="1" />
    <value name="MTLPrimitiveTypeLineStrip" value="2" />
    <value name="MTLPrimitiveTypeTriangle" value="3" />
    <value name="MTLPrimitiveTypeTriangleStrip" value="4" />
  </enumeration>

  <enumeration name="MTLStorageMode" type="NSUInteger">
    <value name="MTLStorageModeShared" value="0" />
    <value name="MTLStorageModeManaged" value="1" />
    <value name="MTLStorageModePrivate" value="2" />
  </enumeration>

  <enumeration name="MTLTriangleFillMode" type="NSUInteger">
    <value name="MTLTriangleFillModeFill" value="0" />
    <value name="MTLTriangleFillModeLines" value="1" />
  </enumeration>

  <enumeration name="MTLVisibilityResultMode" type="NSUInteger">
    <value name="MTLVisibilityResultModeDisabled" value="0" />
    <value name="MTLVisibilityResultModeBoolean" value="1" />
    <value name="MTLVisibilityResultModeCounting" value="2" />
  </enumeration>

  <enumeration name="MTLWinding" type="NSUInteger">
    <value name="MTLWindingClockwise" value="0" />
    <value name="MTLWindingCounterClockwise" value="1" />
  </enumeration>

  <!-- Classes -->
  <class name="MTLArgument" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLArrayType" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLAttribute" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLAttributeDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLAttributeDescriptorArray" inherits="NSObject">
    <!-- Instance Methods -->
    <method selector="objectAtIndex:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLAttributeDescriptor" />
    </method>

    <method selector="objectAtIndexedSubscript:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLAttributeDescriptor" />
    </method>
  </class>

  <class name="MTLBufferLayoutDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLBufferLayoutDescriptorArray" inherits="NSObject">
    <!-- Instance Methods -->
    <method selector="objectAtIndex:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLBufferLayoutDescriptor" />
    </method>

    <method selector="objectAtIndexedSubscript:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLBufferLayoutDescriptor" />
    </method>
  </class>

  <class name="MTLCompileOptions" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLComputePipelineDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLComputePipelineReflection" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLDepthStencilDescriptor" inherits="NSObject">
    <initializer selector="init" />

    <!-- Specifying Depth Operations -->
    <property name="depthCompareFunction" type="MTLCompareFunction" />
    <property name="depthWriteEnabled" getter="isDepthWriteEnabled" type="bool" />

    <!-- Specifying Stencil Descriptors for Primitives -->
    <property name="backFaceStencil" protocol="MTLStencilDescriptor" />
    <property name="frontFaceStencil" protocol="MTLStencilDescriptor" />

    <!-- Identifying Properties -->
    <property name="label" protocol="NSString" />

  </class>

  <class name="MTLFunctionConstant" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLFunctionConstantValues" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLHeapDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLRenderPassAttachmentDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLRenderPassColorAttachmentDescriptor" inherits="MTLRenderPassAttachmentDescriptor, NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLRenderPassColorAttachmentDescriptorArray" inherits="NSObject">
    <!-- Instance Methods -->
    <method selector="objectAtIndex:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLRenderPassColorAttachmentDescriptor" />
    </method>

    <method selector="objectAtIndexedSubscript:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLRenderPassColorAttachmentDescriptor" />
    </method>
  </class>

  <class name="MTLRenderPassDepthAttachmentDescriptor" inherits="MTLRenderPassAttachmentDescriptor, NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLRenderPassDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLRenderPassStencilAttachmentDescriptor" inherits="MTLRenderPassAttachmentDescriptor, NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLRenderPipelineColorAttachmentDescriptor" inherits="NSObject">
    <!-- Specifying Render Pipeline State -->
    <property name="pixelFormat" type="MTLPixelFormat" />
    <property name="writeMask" type="MTLColorWriteMask" />

    <!-- Controlling the Blend Operation -->
    <property name="blendingEnabled" getter="isBlendingEnabled" type="bool" />
    <property name="alphaBlendOperation" type="MTLBlendOperation" />
    <property name="rgbBlendOperation" type="MTLBlendOperation" />

    <!-- Specifying Blend Factors -->
    <property name="destinationAlphaBlendFactor" type="MTLBlendFactor" />
    <property name="destinationRGBBlendFactor" type="MTLBlendFactor" />
    <property name="sourceAlphaBlendFactor" type="MTLBlendFactor" />
    <property name="sourceRGBBlendFactor" type="MTLBlendFactor" />
  </class>

  <class name="MTLRenderPipelineColorAttachmentDescriptorArray" inherits="NSObject">
    <!-- Instance Methods -->
    <method selector="objectAtIndex:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLRenderPipelineColorAttachmentDescriptor" />
    </method>

    <method selector="objectAtIndexedSubscript:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLRenderPipelineColorAttachmentDescriptor" />
    </method>
  </class>

  <class name="MTLRenderPipelineDescriptor" inherits="NSObject">
    <initializer selector="init" />

    <!-- Specifying Shader Functions and Associated Data -->
    <property name="fragmentFunction" protocol="MTLFunction" />
    <property name="vertexFunction" protocol="MTLFunction" />
    <property name="vertexDescriptor" protocol="MTLVertexDescriptor" />

    <!-- Specifying Rendering Pipeline State -->
    <method selector="reset" />
    <property name="colorAttachments" protocol="MTLRenderPipelineColorAttachmentDescriptorArray" />
    <property name="depthAttachmentPixelFormat" type="MTLPixelFormat" />
    <property name="stencilAttachmentPixelFormat" type="MTLPixelFormat" />

    <!-- Specifying Rasterization and Visibility State -->
    <!-- TODO: All missing -->

    <!-- Specifying Tessellation State -->
    <!-- TODO: All missing -->

    <!-- Identifying Properties -->
    <property name="label" protocol="NSString" />
  </class>

  <class name="MTLRenderPipelineReflection" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLSamplerDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLStageInputOutputDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLStencilDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLStructMember" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLStructType" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLTextureDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLVertexAttribute" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLVertexAttributeDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLVertexAttributeDescriptorArray" inherits="NSObject">
    <!-- Instance Methods -->
    <method selector="objectAtIndex:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLVertexAttributeDescriptor" />
    </method>

    <method selector="objectAtIndexedSubscript:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLVertexAttributeDescriptor" />
    </method>
  </class>

  <class name="MTLVertexBufferLayoutDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <class name="MTLVertexBufferLayoutDescriptorArray" inherits="NSObject">
    <!-- Instance Methods -->
    <method selector="objectAtIndex:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLVertexBufferLayoutDescriptor" />
    </method>

    <method selector="objectAtIndexedSubscript:">
      <argument name="index" type="NSUInteger" />
      <return protocol="MTLVertexBufferLayoutDescriptor" />
    </method>
  </class>

  <class name="MTLVertexDescriptor" inherits="NSObject">
    <!-- TODO: All missing -->
  </class>

  <!-- Protocols -->
  <protocol name="MTLBlitCommandEncoder" inherits="MTLCommandEncoder, NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLBuffer" inherits="MTLResource, NSObject">
    <!-- Creating a Texture That Shares Buffer Data -->
    <!-- TODO: newTextureWithDescriptor:offset:bytesPerRow: -->

    <!-- Locating the Buffer’s Storage -->
    <method selector="contents">
      <return type="*mut std::os::raw::c_void" />
    </method>

    <!-- Invalidating the Buffer’s Storage -->
    <!-- TODO: Fix NSRange
    <method selector="didModifyRange:">
      <argument name="range" type="NSRange" />
    </method>
    -->

    <!-- Properties -->
    <property name="length" type="NSUInteger" read-only />

    <!-- Instance Methods -->
    <!-- TODO: Fix NSRange
    <method selector="addDebugMarker:range:">
      <argument name="marker" protocol="NSString" />
      <argument name="range" type="NSRange" />
    </method>
    -->
    <method selector="removeAllDebugMarkers" />
  </protocol>

  <protocol name="MTLCommandBuffer" inherits="NSObject">
    <!-- Creating Command Encoders -->
    <method selector="renderCommandEncoderWithDescriptor:">
      <argument name="renderPassDescriptor" protocol="MTLRenderPassDescriptor" />
      <return protocol="MTLRenderCommandEncoder" />
    </method>
    <method selector="computeCommandEncoder">
      <return protocol="MTLComputeCommandEncoder" />
    </method>
    <method selector="blitCommandEncoder">
      <return protocol="MTLBlitCommandEncoder" />
    </method>
    <method selector="parallelRenderCommandEncoderWithDescriptor:">
      <argument name="renderPassDescriptor" protocol="MTLRenderPassDescriptor" />
      <return protocol="MTLParallelRenderCommandEncoder" />
    </method>

    <!-- Scheduling and Executing Commands -->
    <method selector="enqueue" />
    <method selector="commit" />
    <!-- TODO: addScheduledHandler: -->
    <!-- TODO: addCompletedHandler: -->
    <method selector="presentDrawable:">
      <argument name="drawable" protocol="MTLDrawable" />
    </method>
    <method selector="presentDrawable:atTime:">
      <argument name="drawable" protocol="MTLDrawable" />
      <argument name="time" type="CFTimeInterval" />
    </method>
    <method selector="waitUntilScheduled" />
    <method selector="waitUntilCompleted" />

    <!-- Monitoring Command Buffer Execution -->
    <!-- TODO: status -->
    <!-- TODO: error -->

    <!-- Determining Whether to Keep Strong References to Associated Resource Objects -->
    <property name="retainedReferences" type="bool" read-only />

    <!-- Identifying the Command Buffer -->
    <property name="device" protocol="MTLDevice" read-only />
    <property name="commandQueue" protocol="MTLCommandQueue" read-only />
    <property name="label" protocol="NSString" />
  </protocol>

  <protocol name="MTLCommandEncoder" inherits="NSObject">
    <!-- Ending Encoded Commands -->
    <method selector="endEncoding" />

    <!-- Debugging from Xcode with Strings -->
    <method selector="insertDebugSignpost">
      <argument name="string" protocol="NSString" />
    </method>

    <method selector="pushDebugGroup">
      <argument name="string" protocol="NSString" />
    </method>

    <method selector="popDebugGroup" />

    <!-- Identifying Properties -->
    <property name="device" protocol="MTLDevice" read-only />
    <property name="label" protocol="NSString" />
  </protocol>
  <!-- TODO: MTLCommandEncoder -->

  <protocol name="MTLCommandQueue" inherits="NSObject">
    <!-- Creating Command Buffers -->
    <method selector="commandBuffer">
      <return protocol="MTLCommandBuffer" />
    </method>

    <method selector="commandBufferWithUnretainedReferences">
      <return protocol="MTLCommandBuffer" />
    </method>

    <!-- Debugging with Xcode -->
    <method selector="insertDebugCaptureBoundary" />

    <!-- Identifying Properties -->
    <property name="device" protocol="MTLDevice" read-only />
    <property name="label" protocol="NSString" />
  </protocol>

  <protocol name="MTLComputeCommandEncoder" inherits="MTLCommandEncoder, NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLComputePipelineState" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLDepthStencilState" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <!-- TODO: MTLDevice -->

  <protocol name="MTLDrawable" inherits="NSObject">
    <method selector="present" />
    <method selector="presentAtTime:">
      <argument name="presentationTime" type="CFTimeInterval" />
    </method>
  </protocol>

  <protocol name="MTLFence" inherits="NSObject">
    <!-- Properties -->
    <property name="device" protocol="MTLDevice" read-only />
    <property name="label" protocol="NSString" />
  </protocol>

  <protocol name="MTLFunction" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLHeap" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLLibrary" inherits="NSObject">
    <!-- Fetch a Non-Specialized Function -->
    <method selector="newFunctionWithName:">
      <argument name="functionName" protocol="NSString" />
      <return protocol="MTLFunction" />
    </method>

    <!-- Compile a Specialized Function -->
    <!-- TODO: newFunctionWithName:constantValues:completionHandler: -->
    <!-- TODO: newFunctionWithName:constantValues:error: -->

    <!-- Querying Library Contents -->
    <property name="functionNames" protocol="NSArray" element="NSString" read-only />

    <!-- Identifying Properties -->
    <property name="device" protocol="MTLDevice" read-only />
    <property name="label" protocol="NSString" />
  </protocol>

  <protocol name="MTLParallelRenderCommandEncoder" inherits="MTLCommandEncoder, NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLRenderCommandEncoder" inherits="MTLCommandEncoder, NSObject">
    <!-- Setting Graphics Rendering State -->
    <method selector="setBlendColorRed:green:blue:alpha:">
      <argument name="red" type="f32" />
      <argument name="green" type="f32" />
      <argument name="blue" type="f32" />
      <argument name="alpha" type="f32" />
    </method>

    <method selector="setCullMode:">
      <argument name="cullMode" type="MTLCullMode" />
    </method>

    <method selector="setDepthBias:slopeScale:clamp:">
      <argument name="depthBias" type="f32" />
      <argument name="slopeScale" type="f32" />
      <argument name="clamp" type="f32" />
    </method>

    <method selector="setDepthClipMode:">
      <argument name="depthClipMode" type="MTLDepthClipMode" />
    </method>

    <method selector="setDepthStencilState:">
      <argument name="depthStencilState" protocol="MTLDepthStencilState" />
    </method>

    <method selector="setFrontFacingWinding:">
      <argument name="frontFacingWinding" type="MTLWinding" />
    </method>

    <method selector="setRenderPipelineState:">
      <argument name="pipelineState" protocol="MTLRenderPipelineState" />
    </method>

    <!-- TODO: Needs MTLScissorRect
    <method selector="setScissorRect:">
      <argument name="rect" protocol="MTLScissorRect" />
    </method>
    -->

    <method selector="setStencilFrontReferenceValue:backReferenceValue:">
      <argument name="frontReferenceValue" type="u32" />
      <argument name="backReferenceValue" type="u32" />
    </method>

    <method selector="setStencilReferenceValue:">
      <argument name="referenceValue" type="u32" />
    </method>

    <method selector="setTriangleFillMode:">
      <argument name="fillMode" type="MTLTriangleFillMode" />
    </method>

    <!-- TODO: Needs MTLViewport
    <method selector="setViewport:">
      <argument name="viewport" protocol="MTLViewport" />
    </method>
    -->

    <method selector="setVisibilityResultMode:offset:">
      <argument name="mode" type="MTLVisibilityResultMode" />
      <argument name="offset" type="NSUInteger" />
    </method>

    <!-- Specifying Resources for a Vertex Shader Function -->
    <method selector="setVertexBuffer:offset:atIndex:">
      <argument name="buffer" protocol="MTLBuffer" />
      <argument name="offset" type="NSUInteger" />
      <argument name="index" type="NSUInteger" />
    </method>
    <!-- TODO: All missing -->

    <!-- Specifying Resources for a Fragment Shader Function -->
    <!-- TODO: All missing -->

    <!-- Specifying Tessellation Factors -->
    <!-- TODO: All missing -->

    <!-- Drawing Geometric Primitives -->
    <!-- TODO: All missing -->
    <method selector="drawPrimitives:vertexStart:vertexCount:">
      <argument name="primitiveType" type="MTLPrimitiveType" />
      <argument name="vertexStart" type="NSUInteger" />
      <argument name="vertexCount" type="NSUInteger" />
    </method>

    <!-- TODO: More missing -->

    <method selector="drawIndexedPrimitives:indexCount:indexType:indexBuffer:indexBufferOffset:">
      <argument name="primitiveType" type="MTLPrimitiveType" />
      <argument name="indexCount" type="NSUInteger" />
      <argument name="indexType" type="MTLIndexType" />
      <argument name="indexBuffer" protocol="MTLBuffer" />
      <argument name="indexBufferOffset" type="NSUInteger" />
    </method>
    <!-- TODO: drawIndexedPrimitives:indexType:indexBuffer:indexBufferOffset:indirectBuffer:indirectBufferOffset: -->

    <!-- Drawing Tessellated Patches -->
    <!-- TODO: All missing -->

    <!-- Enabling Texture Barriers -->
    <!-- TODO: All missing -->

    <!-- Specifying a Store Action -->
    <!-- TODO: All missing -->

    <!-- Performing Fence Operations -->
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLRenderPipelineState" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLResource" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLSamplerState" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>

  <protocol name="MTLTexture" inherits="NSObject">
    <!-- TODO: All missing -->
  </protocol>
</framework>
